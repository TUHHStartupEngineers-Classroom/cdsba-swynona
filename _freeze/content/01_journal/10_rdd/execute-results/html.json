{
  "hash": "b2edcbe028de76278cfefac04a7b7cd5",
  "result": {
    "markdown": "---\ntitle: \"Regression Discontinuity\"\nauthor: \"Sophia Wynona\"\n---\n\n\n::: callout-note\nAssignment X on Regression Discontinuity - final submission\n:::\n\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-1_d9af4b56c61ef01e44cb4aeb293865b8'}\n\n```{.r .cell-code}\nlibrary(dplyr)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'dplyr' was built under R version 4.2.3\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> \n#> Attaching package: 'dplyr'\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following objects are masked from 'package:stats':\n#> \n#>     filter, lag\n```\n:::\n\n::: {.cell-output .cell-output-stderr}\n```\n#> The following objects are masked from 'package:base':\n#> \n#>     intersect, setdiff, setequal, union\n```\n:::\n\n```{.r .cell-code}\nlibrary(ggplot2)\n```\n\n::: {.cell-output .cell-output-stderr}\n```\n#> Warning: package 'ggplot2' was built under R version 4.2.3\n```\n:::\n\n```{.r .cell-code}\ncoupon <- readRDS(\"C:/Users/sophi/OneDrive/Desktop/Causal Data Science for Business Analytics 2023/gitclone/cdsba-swynona/assets/Causal_Data_Science_Data/coupon.rds\")\nshipping <- readRDS(\"C:/Users/sophi/OneDrive/Desktop/Causal Data Science for Business Analytics 2023/gitclone/cdsba-swynona/assets/Causal_Data_Science_Data/shipping.rds\")\n\n# Define bandwidths\nhalf_bandwidth <- max(coupon$days_since_last_centered) / 2\ndouble_bandwidth <- max(coupon$days_since_last_centered) * 2\n\n# Filter data based on bandwidth\ndf_half <- coupon %>% filter(abs(days_since_last_centered) <= half_bandwidth)\ndf_double <- coupon %>% filter(abs(days_since_last_centered) <= double_bandwidth)\n\n# Run regression analyses\nmodel_half <- lm(purchase_after ~ days_since_last_centered + coupon, data = df_half)\nmodel_double <- lm(purchase_after ~ days_since_last_centered + coupon, data = df_double)\n\n# Print summary of models\nsummary(model_half)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_after ~ days_since_last_centered + coupon, \n#>     data = df_half)\n#> \n#> Residuals:\n#>      Min       1Q   Median       3Q      Max \n#> -15.1726  -2.7191  -0.4112   2.0888  31.4876 \n#> \n#> Coefficients:\n#>                          Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)               8.95828    0.14414   62.15   <2e-16 ***\n#> days_since_last_centered -0.10701    0.00361  -29.64   <2e-16 ***\n#> couponTRUE               14.07541    0.26202   53.72   <2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 4.257 on 4919 degrees of freedom\n#> Multiple R-squared:  0.4212,\tAdjusted R-squared:  0.421 \n#> F-statistic:  1790 on 2 and 4919 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nsummary(model_double)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_after ~ days_since_last_centered + coupon, \n#>     data = df_double)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -15.005  -2.763  -0.453   2.063  32.047 \n#> \n#> Coefficients:\n#>                           Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)               9.780254   0.133924   73.03   <2e-16 ***\n#> days_since_last_centered -0.083602   0.003258  -25.66   <2e-16 ***\n#> couponTRUE               13.085707   0.256153   51.09   <2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 4.321 on 4997 degrees of freedom\n#> Multiple R-squared:  0.408,\tAdjusted R-squared:  0.4078 \n#> F-statistic:  1722 on 2 and 4997 DF,  p-value: < 2.2e-16\n```\n:::\n\n```{.r .cell-code}\nggplot(shipping, aes(x=purchase_amount)) +\n  geom_histogram(binwidth=1, fill=\"blue\", color=\"black\") +\n  geom_vline(aes(xintercept=30), color=\"red\", linetype=\"dashed\", linewidth=1) +\n  labs(title=\"Histogram of Purchase Amounts\",\n       x=\"Purchase Amount\",\n       y=\"Frequency\",\n       caption=\"Red line indicates the 30â‚¬ free shipping threshold\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](10_rdd_files/figure-html/unnamed-chunk-1-1.png){width=672}\n:::\n:::",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}