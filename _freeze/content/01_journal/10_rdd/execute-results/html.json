{
  "hash": "18232f01ac1d86d8309cb8c90f3f2fd6",
  "result": {
    "markdown": "---\ntitle: \"Regression Discontinuity\"\nauthor: \"Sophia Wynona\"\n---\n\n\n::: callout-note\nAssignment X on Regression Discontinuity - final submission\n:::\n\n# Task 1\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-1_c28470badec2ad6328dc7ea0d22d1050'}\n\n```{.r .cell-code}\nlibrary(dplyr)\nlibrary(ggplot2)\ncoupon <- readRDS(\"C:/Users/sophi/OneDrive/Desktop/Causal Data Science for Business Analytics 2023/gitclone/cdsba-swynona/assets/Causal_Data_Science_Data/coupon.rds\")\nshipping <- readRDS(\"C:/Users/sophi/OneDrive/Desktop/Causal Data Science for Business Analytics 2023/gitclone/cdsba-swynona/assets/Causal_Data_Science_Data/shipping.rds\")\n\n\n# Define bandwidths\nhalf_bandwidth <- max(coupon$days_since_last_centered) / 2\ndouble_bandwidth <- max(coupon$days_since_last_centered) * 2\n\n# Filter data based on bandwidth\ndf_half <- coupon %>% filter(abs(days_since_last_centered) <= half_bandwidth)\ndf_double <- coupon %>% filter(abs(days_since_last_centered) <= double_bandwidth)\n\n# Run regression analyses\nmodel_half <- lm(purchase_after ~ days_since_last_centered + coupon, data = df_half)\nmodel_double <- lm(purchase_after ~ days_since_last_centered + coupon, data = df_double)\n```\n:::\n\nhalf bandwidth model\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-2_0a15321875da097aedf38350c5350f07'}\n\n```{.r .cell-code}\nsummary(model_half)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_after ~ days_since_last_centered + coupon, \n#>     data = df_half)\n#> \n#> Residuals:\n#>      Min       1Q   Median       3Q      Max \n#> -15.1726  -2.7191  -0.4112   2.0888  31.4876 \n#> \n#> Coefficients:\n#>                          Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)               8.95828    0.14414   62.15   <2e-16 ***\n#> days_since_last_centered -0.10701    0.00361  -29.64   <2e-16 ***\n#> couponTRUE               14.07541    0.26202   53.72   <2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 4.257 on 4919 degrees of freedom\n#> Multiple R-squared:  0.4212,\tAdjusted R-squared:  0.421 \n#> F-statistic:  1790 on 2 and 4919 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\n\n# Task 2\ndouble bandwidth model\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-3_3200f9361c587c461b09161894a112bd'}\n\n```{.r .cell-code}\nsummary(model_double)\n```\n\n::: {.cell-output .cell-output-stdout}\n```\n#> \n#> Call:\n#> lm(formula = purchase_after ~ days_since_last_centered + coupon, \n#>     data = df_double)\n#> \n#> Residuals:\n#>     Min      1Q  Median      3Q     Max \n#> -15.005  -2.763  -0.453   2.063  32.047 \n#> \n#> Coefficients:\n#>                           Estimate Std. Error t value Pr(>|t|)    \n#> (Intercept)               9.780254   0.133924   73.03   <2e-16 ***\n#> days_since_last_centered -0.083602   0.003258  -25.66   <2e-16 ***\n#> couponTRUE               13.085707   0.256153   51.09   <2e-16 ***\n#> ---\n#> Signif. codes:  0 '***' 0.001 '**' 0.01 '*' 0.05 '.' 0.1 ' ' 1\n#> \n#> Residual standard error: 4.321 on 4997 degrees of freedom\n#> Multiple R-squared:  0.408,\tAdjusted R-squared:  0.4078 \n#> F-statistic:  1722 on 2 and 4997 DF,  p-value: < 2.2e-16\n```\n:::\n:::\n\n\n# Task 3\nPlotting to confirm arguments\n\n::: {.cell hash='10_rdd_cache/html/unnamed-chunk-4_ca43ed5d345b3ab8e618e3c050b2b7f7'}\n\n```{.r .cell-code}\nggplot(shipping, aes(x=purchase_amount)) +\n  geom_histogram(binwidth=1, fill=\"blue\", color=\"black\") +\n  geom_vline(aes(xintercept=30), color=\"red\", linetype=\"dashed\", linewidth=1) +\n  labs(title=\"Histogram of Purchase Amounts\",\n       x=\"Purchase Amount\",\n       y=\"Frequency\",\n       caption=\"Red line indicates the 30€ free shipping threshold\") +\n  theme_minimal()\n```\n\n::: {.cell-output-display}\n![](10_rdd_files/figure-html/unnamed-chunk-4-1.png){width=672}\n:::\n:::\n\nBased on the histogram , it appears that the purchase_amount variable could potentially be used as a running variable with a cut-off at 30€. \nReasons :\nCluster of Purchases: There is a significant number of purchases clustered around the 30€ mark. This could indicate that customers were motivated to increase their purchase amount to qualify for free shipping.\nThreshold Effect: The red dashed vertical line at the 30€ mark on the x-axis indicates the free shipping threshold. If there is a significant difference in the distribution of the purchase amounts on either side of this line, it could suggest that the 30€ free shipping offer had an impact on customer behavior.\nHowever, to confirm this argument, further statistical analysis is required. For instance, a regression discontinuity design could be used to estimate the causal effect of the free shipping offer on the purchase amount. This would involve fitting separate regression lines to the data on either side of the 30€ cut-off and then comparing the predicted values at the cut-off point.\n",
    "supporting": [],
    "filters": [
      "rmarkdown/pagebreak.lua"
    ],
    "includes": {
      "include-in-header": [
        "<link href=\"../../site_libs/pagedtable-1.1/css/pagedtable.css\" rel=\"stylesheet\" />\r\n<script src=\"../../site_libs/pagedtable-1.1/js/pagedtable.js\"></script>\r\n"
      ]
    },
    "engineDependencies": {},
    "preserve": {},
    "postProcess": true
  }
}